<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Learningmap Editor Test</title>
  <link rel="stylesheet" href="./dist/web-component-learningmap.css">
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, sans-serif;
    }

    hyperbook-learningmap {
      display: block;
      width: 100vw;
      height: 100vh;
    }
  </style>
</head>

<body>
  <hyperbook-learningmap id="map" language="en"></hyperbook-learningmap>

  <script src="./dist/index.umd.js"></script>
  <script>
    const map = document.getElementById('map');

    // Initialize with sample data
    const initialData = {
      settings: {
        title: "Sample Learning Roadmap",
        background: {
          color: "#f0f9ff"
        }
      },
      nodes: [
        {
          id: "node1",
          type: "task",
          position: {x: 100, y: 100},
          className: "red",
          data: {
            label: "Getting Started",
            summary: "Introduction to the topic",
            description: "Learn the fundamentals",
            resources: [
              {label: "Documentation", url: "https://example.com/docs"}
            ]
          }
        },
        {
          id: "node2",
          type: "topic",
          className: "blue",
          position: {x: 100, y: 300},
          data: {
            label: "Advanced Topics",
            summary: "Deep dive into advanced concepts",
            unlock: {
              after: ["node1"]
            },
            completion: {
              needs: ["node1"]
            }
          }
        }
      ],
      edges: [],
    };

    map.setAttribute('roadmap-data', JSON.stringify(initialData));

    // Listen for save events
    map.addEventListener('change', (event) => {
      console.log('Roadmap changed:', event.detail);
    });

    const initialState = {
      nodes: {node1: {state: "started"}}
    }
    map.setAttribute('initial-state', JSON.stringify(initialState));
  </script>
</body>

</html>
